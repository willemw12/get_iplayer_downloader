get_iplayer_downloader is a download utility for the BBC get_iplayer program.

This program is a graphical version of the command "get_iplayer --tree", followed by "get_iplayer --pid" or "get_iplayer --info". It displays all the found programmes in a large treeview with two main columns: serie title and episode title plus description.

It is a small utility program for me to try and find out what standard Python and GTK+ 3 can do, after creating a version of the downloader with zenity in bash, which was far too slow.

This program works best with a screen resolution of 1024x768 or higher.

I let the downloads run in one or more terminal windows, so I can see when and which download fails or hangs.

Some screenshots:

    https://github.com/willemw12/get_iplayer_downloader/wiki/images/screenshot1.png
    https://github.com/willemw12/get_iplayer_downloader/wiki/images/screenshot2.png

For the latest version see https://github.com/willemw12/get_iplayer_downloader.

This program is licensed under GPLv3 (see file COPYING).

Disclaimer: this program doesn't do any downloading itself. It relies on the get_iplayer program to do the actual downloading.



Dependencies
============

get_iplayer and its dependencies (http://www.infradead.org/get_iplayer/html/get_iplayer.html).

Python (2.7). Python setuptools (to run setup.py). GNOME libraries for Python (GTK+ 3 and associated libraries Gdk, GObject, Gio and Pango).

Linux (only to run get_iplayer in a terminal window and to display the number of running get_iplayer processes). This program may work on other platforms as well, but that has not been tested.



Configuration
=============

1) get_iplayer

Configure get_iplayer presets "tv" and "radio" for tv, radio and podcasts (files ~/.get_iplayer/presets/tv and ~/.get_iplayer/presets/radio). Settings should preferable include:

    "tvmode=..." and "radiomode=...": the default download modes

Now "get_iplayer --preset=radio ..." and "get_iplayer --preset=tv" should work properly from the command line.

Optionally, setup a get_iplayer pvr scheduler (cronjob).

Note: get_iplayer has a fixed download list size (info_limit = 40).

2) get_iplayer_downloader

Most configuration settings can be managed from the GUI (right-click, Preferences). Other settings can be found in the configuration file (~/get_iplayer_downloader/config, which will be created after running the program for the first time). Before downloading, check the download paths and terminal emulator program name in the GUI or in the configuration file. The default BBC programme settings (channel lists and category lists) are configured according to my preference and don't contain all possible values.



Installation
============

To execute without installing, run:

    <path to this directory>/src/get_iplayer_downloader.py

Or to install, run from this directory:

    sudo python setup.py install
    sudo rm -rf build

Then to execute, run:

    get_iplayer_downloader

If python 2 (2.7 or higher) and python 3 are both installed and the name of the python 2 executable is python2, then replace the first two commands above by:

    python2 <path to this directory>/src/get_iplayer_downloader.py
    sudo python2 setup.py install



Shortcut keys
=============

alt + enter     Properties  View properties of highlighted programme (of programme in focus)
ctrl + d        Download    Download or queue selected programmes
ctrl + q        Queue       Queue selected programmes for one-off downloading by get_iplayer pvr
ctrl + f        Find        Go to search entry field on the tool bar
ctrl + t        Toggle      Rotate between programme types (radio, podcast, tv)
ctrl + c        Clear       Clear programme download selection
ctrl + r        Refresh     Refresh programme cache
f1				Help		View shortcut key list

down-arrow                  Go from tool bar to search result
space or enter              Toggle programme selection in search result



Extras
======

File ./extra/get_iplayer_tv_post.py is a get_iplayer post-processing script, that can be used by the get_iplayer command option. The script moves the downloaded file to the output subdirectory with the most specific programme category name. Substitution <categories> in the get_iplayer output directory option does something similar, but that option combines all the categories ("FactualArts_Culture_the_MediaHistory" instead of "History", which is the most specific category). Copy or link the script to a $PATH directory, for example:

    ln -s <path to this directory>/src/extra/get_iplayer_post_category.py ~/bin/get_iplayer_post_category.py

or add a path in front of the command below. In, for example, ~/.get_iplayer/presets/tv put:

    command get_iplayer_post_category.py --filename="<filename>" --categories="<categories>"

There is also an additional output directory name substitution supported by get_iplayer_downloader: <week>. It generates the current week number in the get_iplayer --subdir-format command line option. It overrides the subdir and subdir-format options in the preset file. For example, in ~/.config/get_iplayer_downloader/config:

    subdir-format = bbc.<week>
    